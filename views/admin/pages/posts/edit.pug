extends ../../layouts/default.pug
include ../../mixins/alert.pug
include ../../mixins/select-tree-category.pug

block main 
    +alert-error(5000)
    +alert-success(5000)

    h1.mb-4 Chỉnh sửa bài viết

    form(
        action=`${prefixAdmin}/posts/edit/${post.id}?_method=PATCH`,
        id="form-edit-post",
        method="POST",
        enctype="multipart/form-data"
    )
        // Tiêu đề
        .form-group
            label(for="title") Tiêu đề
            input#title.form-control(
                type="text",
                name="title",
                required,
                value=post.title
            )

        // Danh mục
        .form-group
            label(for="category") Danh mục
            select#category.form-control(name="category")
                if postCategories
                    +select-tree(postCategories, post.category)

        // Featured
        .form-group.form-check.form-check-inline
            input#hot.form-check-input(
                type="radio",
                name="featured",
                value="hot",
                checked=(post.featured === "hot")
            )
            label.form-check-label(for="hot") Nổi bật

        .form-group.form-check.form-check-inline
            input#normal.form-check-input(
                type="radio",
                name="featured",
                value="normal",
                checked=(post.featured === "normal")
            )
            label.form-check-label(for="normal") Không

        // Mô tả
        .form-group
            label(for="desc") Mô tả ngắn
            textarea#desc.form-control(
                name="description",
                rows="3"
            ) #{post.description}

        // Nội dung
        .form-group
            label(for="content") Nội dung bài viết
            textarea#content.form-control(
                name="content",
                rows="8"
            ) #{post.content}

        // Ảnh
        .form-group(upload-image)
            label(for="thumbnail") Ảnh đại diện
            input#thumbnail.form-control-file(
                type="file",
                name="thumbnail",
                accept="image/*",
                upload-image-input
            )
            br
            button.btn.btn-danger.mt-2(
                type="button",
                upload-image-remove,
                style="display: none"
            ) Xoá ảnh
            br
            image.image-preview(
                src=post.thumbnail,
                upload-image-preview
            )

        // Vị trí
        .form-group
            label(for="position") Vị trí
            input#position.form-control(
                type="number",
                name="position",
                placeholder="Tự động tăng",
                value=post.position,
                min="1"
            )

        // Trạng thái
        .form-group.form-check.form-check-inline
            input#statusActive.form-check-input(
                type="radio",
                name="status",
                value="active",
                checked=(post.status === "active")
            )
            label.form-check-label(for="statusActive") Hoạt động

        .form-group.form-check.form-check-inline
            input#statusInactive.form-check-input(
                type="radio",
                name="status",
                value="inactive",
                checked=(post.status === "inactive")
            )
            label.form-check-label(for="statusInactive") Dừng hoạt động

        // Submit
        .form-group
            button.btn.btn-primary(type="submit") Cập nhật

    script(src="/admin/js/post.js")
