extends ../../layouts/default.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/form-change-multi.pug
include ../../mixins/alert.pug
include ../../mixins/table-tree-post-category.pug
block main
  +alert-success(5000)
  if(role.permissions.includes("posts-category_view"))
    h1 Danh mục bài viết
    // Danh sách danh mục
    .card.mb-3
      .card-header Danh sách danh mục
      .card-body
        .row
          if(role.permissions.includes("posts-category_edit"))
            .col-8
              +form-change-multi(`${prefixAdmin}/posts-category/change-multi?_method=PATCH`)
          if(role.permissions.includes("posts-category_create"))
            .col-4
              a(href=`${prefixAdmin}/posts-category/create` class="btn btn-outline-success float-right") + Thêm mới

        table.table.table-hover.table-sm.table-bordered(checkbox-multi)
          thead
            tr
              th
                input(type="checkbox" name="checkall")
              th STT
              th Ảnh bài viết
              th Tiêu đề
              th Vị trí
              th Trạng thái
              th Người tạo
              th Người cập nhật
              th Hành động

          tbody
            +table-tree-post-category(records)

    // Form JS dùng để xử lý status và xoá
    form(
      action=""
      method="POST"
      id="form-change-status"
      data-path=`${prefixAdmin}/posts-category/change-status`
    )

    form(
      action=""
      method="POST"
      id="form-delete-item"
      data-path=`${prefixAdmin}/posts-category/delete`
    )

    script(src="/admin/js/postCategory.js")
  else
    div Hiện tại bạn không có quyền xem trang này