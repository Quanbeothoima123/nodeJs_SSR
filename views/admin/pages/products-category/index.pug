extends ../../layouts/default.pug

block main
  h1 Danh mục sản phẩm
  .card.mb-3
    .card-header Sắp xếp
    .card-body
      .row
        .col-4(sort)
          div(sort)
            select.form-control(name="sort" sort-select)
              option(value="position-desc") Vị trí giảm dần
              option(value="position-asc") Vị trí tăng dần
              option(value="title-asc") Tiêu đề A - Z
              option(value="title-desc") Tiêu đề Z - A
            button.btn.btn-danger.mt-2(sort-clear) Clear

  .card.mb-3
    .card-header Danh sách danh mục
    .card-body
      .row
        .col-12
          a(href=`${prefixAdmin}/products-category/create` class="btn btn-outline-success") + Thêm mới

      table(class="table table-hover table-sm" checkbox-multi)
        thead
          tr
            th 
              input(type="checkbox" name="checkall")
            th STT
            th Hình ảnh
            th Tiêu đề
            th Danh mục cha
            th Vị trí
            th Trạng thái
            th Hành động
        tbody
          each item, index in records
            tr
              td 
                input(type="checkbox" name="id" value=item._id)
              td #{index + 1}
              td
                if item.thumbnail
                  img(src=item.thumbnail, alt=item.title, width="80px")
                else
                  i.text-muted Không có ảnh
              td #{item.title}
              td #{item.parent_id || 'Chưa có'}
              td
                input(
                  type="number"
                  value=item.position
                  style="width:60px"
                  min="1"
                  name="position"
                )
              td
                if item.status == "active"
                  a(href="javascript:;" class="badge badge-success" data-status=item.status button-change-status data-id=item._id) Hoạt động
                else
                  a(href="javascript:;" class="badge badge-danger" data-status=item.status button-change-status data-id=item._id) Dừng hoạt động
              td
                a(href=`${prefixAdmin}/products-category/edit/${item._id}` class="btn btn-warning btn-sm") Sửa
                button(class="btn btn-danger btn-sm ml-1" data-id=item._id button-delete) Xoá

  form(
    action=""
    method="POST"
    id="form-change-status"
    data-path=`${prefixAdmin}/products-category/change-status`
  )

  form(
    action=""
    method="POST"
    id="form-delete-item"
    data-path=`${prefixAdmin}/products-category/delete`
  )

  script(src="/admin/js/product.js")
